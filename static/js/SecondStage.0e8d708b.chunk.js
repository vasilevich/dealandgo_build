(this["webpackJsonpflights-trader-client"]=this["webpackJsonpflights-trader-client"]||[]).push([[10],{1291:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(21),r=n.n(a),c=function(e){return r()(["transactions"],(function(t){return t.find((function(t){return t.product_id===e.id}))}))}},1294:function(e,t,n){"use strict";var a=n(36),r=n(42);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n(0)),i=(0,a(n(47)).default)(c.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.default=i},1410:function(e,t,n){e.exports={PassengersForm:"PassengersForm_PassengersForm__1Qhri",continueButton:"PassengersForm_continueButton__2Hvf7"}},1411:function(e,t,n){e.exports={PassengerLabel:"Passenger_PassengerLabel__2R4B_"}},1412:function(e,t,n){e.exports={TransactionIframe:"TransactionIFrame_TransactionIframe__1JxjF",purchaseButtons:"TransactionIFrame_purchaseButtons__1u6jM",continueButton:"TransactionIFrame_continueButton__3Kqd_",creditCard:"TransactionIFrame_creditCard__1uShy",bit:"TransactionIFrame_bit__27I8E",paypalContainer:"TransactionIFrame_paypalContainer__iOaO-",code:"TransactionIFrame_code__3VpRB"}},1413:function(e,t){},1414:function(e,t,n){e.exports={PhoneForm:"PhoneForm_PhoneForm__1TPUB",continueButton:"PhoneForm_continueButton__3jdGF"}},1415:function(e,t,n){"use strict";var a=n(36),r=n(42);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n(0)),i=(0,a(n(47)).default)(c.createElement("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"}),"CreditCard");t.default=i},1479:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(89),i=n(392),s=n.n(i),o=n(30),u=n.n(o),l=n(48),d=n(3),j=n(1410),m=n.n(j),b=n(160),h=n(261),f=n(19),x=n(10),p=n(60),O=n(1411),g=n.n(O),v=n(5),_=n(147),F=n(341),y=n(16),N=n(7),C=n(1),T=function(e){var t,n=Object(p.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(Object.values(a).filter((function(e){return!e})).length>0)return!1}}catch(r){n.e(r)}finally{n.f()}return!0},k=function(e){var t=T(e.passengers);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(v.u,{style:{marginTop:10,marginBottom:10}}),Object(C.jsx)(v.u,{className:g.a.PassengerLabel,children:Object(C.jsxs)(v.g,{sm:"12",style:{fontWeight:500},children:["\u05e0\u05d5\u05e1\u05e2 ",e.ticketIndex]})}),Object(C.jsx)(v.u,{style:{fontSize:"1em"},children:Object(C.jsx)(v.g,{sm:"12",style:{fontWeight:500},children:Object(C.jsxs)(b.a,{container:!0,spacing:2,children:[Object(C.jsx)(b.a,{item:!0,style:{marginTop:15},xs:12,sm:4,children:Object(C.jsx)(f.FastField,{component:_.b,label:"\u05e9\u05dd \u05e4\u05e8\u05d8\u05d9(\u05d0\u05e0\u05d2\u05dc\u05d9\u05ea)",id:"firstName".concat(e.ticketIndex),name:"firstName".concat(e.ticketIndex),variant:"outlined",autoComplete:"fname",className:!e.errors["firstName".concat(e.ticketIndex)]&&e.touched["firstName".concat(e.ticketIndex)]?"valid":"",required:!0,fullWidth:!0,readOnly:e.readOnly,onChange:function(t){e.setFieldValue("firstName".concat(e.ticketIndex),Object(y.a)(t.target.value).toUpperCase())},onBlur:function(n){t&&e.submitForm()}})}),Object(C.jsx)(b.a,{item:!0,style:{marginTop:15},xs:12,sm:4,children:Object(C.jsx)(f.FastField,{component:_.b,label:"\u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4(\u05d0\u05e0\u05d2\u05dc\u05d9\u05ea)",id:"lastName".concat(e.ticketIndex),name:"lastName".concat(e.ticketIndex),variant:"outlined",autoComplete:"lname",className:!e.errors["lastName".concat(e.ticketIndex)]&&e.touched["lastName".concat(e.ticketIndex)]?"valid":"",required:!0,fullWidth:!0,readOnly:e.readOnly,onChange:function(t){e.setFieldValue("lastName".concat(e.ticketIndex),Object(y.a)(t.target.value).toUpperCase())},onBlur:function(n){t&&e.submitForm()}})}),Object(C.jsx)(N.If,{condition:9999999999999!==e.passengers[e.ticketIndex-1].birthDate,children:Object(C.jsx)(N.Then,{children:function(){return Object(C.jsx)(b.a,{item:!0,xs:12,sm:4,style:{paddingTop:22},children:Object(C.jsx)(f.FastField,{component:F.a,label:"\u05ea\u05d0\u05e8\u05d9\u05da \u05dc\u05d9\u05d3\u05d4",name:"birthDate".concat(e.ticketIndex),minDate:0,maxDate:new Date,format:"DD/MM/YYYY",onClose:function(){t&&setTimeout((function(){return e.submitForm()}),1500)}})})}})})]})})})]})};k.defaultProps={ticketIndex:1,passengers:[]};var I=r.a.memo(k),P=n(267),B=n.n(P),S=function(e){for(var t={},n={},a=1;a<=e.passengers.length;a++)n["firstName".concat(a)]=x.g().min(2,"\u05e9\u05dd \u05e4\u05e8\u05d8\u05d9 \u05e6\u05e8\u05d9\u05da \u05dc\u05d4\u05d9\u05d5\u05ea 2 \u05d0\u05d5\u05ea\u05d9\u05d5\u05ea \u05dc\u05e4\u05d7\u05d5\u05ea").max(15,"\u05e9\u05dd \u05e4\u05e8\u05d8\u05d9 \u05d9\u05db\u05d5\u05dc \u05dc\u05d4\u05d9\u05d5\u05ea \u05e2\u05d3 15 \u05d0\u05d5\u05ea\u05d9\u05d5\u05ea").required("\u05e0\u05d3\u05e8\u05e9 \u05e9\u05dd \u05e4\u05e8\u05d8\u05d9"),n["lastName".concat(a)]=x.g().min(2,"\u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4 \u05d7\u05d9\u05d9\u05d1 \u05dc\u05d4\u05d9\u05d5\u05ea 2 \u05d0\u05d5\u05ea\u05d9\u05d5\u05ea \u05dc\u05e4\u05d7\u05d5\u05ea").max(20,"\u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4 \u05d9\u05db\u05d5\u05dc \u05dc\u05d4\u05d9\u05d5\u05ea \u05e2\u05d3 20 \u05d0\u05d5\u05ea\u05d9\u05d5\u05ea").required("\u05e0\u05d3\u05e8\u05e9 \u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4"),9999999999999!==e.passengers[a-1].birthDate&&(n["birthDate".concat(a)]=x.c().required("\u05d9\u05e9 \u05dc\u05d1\u05d7\u05d5\u05e8 \u05ea\u05d0\u05e8\u05d9\u05da \u05dc\u05d9\u05d3\u05d4")),t["firstName".concat(a)]=e.passengers[a-1].firstName,t["lastName".concat(a)]=e.passengers[a-1].lastName,t["birthDate".concat(a)]=e.passengers[a-1].birthDate;var r=T(e.passengers);return Object(C.jsx)(f.Formik,{initialValues:Object(d.a)(Object(d.a)({},t),{},{firstName1:Object(y.a)(e.user.firstName).toUpperCase(),lastName1:Object(y.a)(e.user.lastName).toUpperCase()}),validationSchema:x.e(Object(d.a)({},n)),onSubmit:function(){var t=Object(l.a)(u.a.mark((function t(n,a){var r,c,i,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c in(0,a.setSubmitting)(!1),r=[{}],n)i=n[c],s=c.replace(/[0-9]/g,""),Object.keys(r[r.length-1]).includes(s)&&r.push({}),r[r.length-1][s]=i;return t.next=6,e.onSubmit(r.slice(0,e.passengers.length));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),enableReinitialize:!1,children:function(t){var n=t.submitForm,a=t.isSubmitting,c=(t.values,t.submitCount,t.touched),i=t.errors,s=t.setFieldValue;return Object(C.jsxs)(f.Form,{className:m.a.PassengersForm,translate:null,children:[Object(C.jsxs)(b.a,{container:!0,spacing:2,children:[Object(C.jsxs)(b.a,{item:!0,xs:12,children:["\u05d0\u05e0\u05d0 \u05de\u05dc\u05d0\u05d5 \u05d0\u05ea \u05e4\u05e8\u05d8\u05d9 \u05d4\u05e0\u05d5\u05e1\u05e2\u05d9\u05dd \u05d1\u05d3\u05d9\u05d5\u05e7 \u05db\u05e4\u05d9 \u05e9\u05de\u05d5\u05e4\u05d9\u05e2 \u05d1\u05d3\u05e8\u05db\u05d5\u05df.",Object(C.jsx)("br",{}),"\u05e9\u05d9\u05e0\u05d5\u05d9 \u05d1\u05e4\u05e8\u05d8\u05d9\u05dd \u05dc\u05d0\u05d7\u05e8 \u05e9\u05dc\u05d9\u05d7\u05ea \u05d4\u05d4\u05d6\u05de\u05e0\u05d4 \u05e2\u05e9\u05d5\u05d9 \u05dc\u05d4\u05d9\u05d5\u05ea \u05db\u05e8\u05d5\u05da \u05d1\u05ea\u05e9\u05dc\u05d5\u05dd (\u05d1\u05d4\u05ea\u05d0\u05dd \u05dc\u05ea\u05e0\u05d0\u05d9 \u05d4\u05db\u05e8\u05d8\u05d9\u05e1 / \u05e9\u05d5\u05d1\u05e8)."]}),Object(C.jsx)(b.a,{item:!0,xs:12,className:"",children:e.passengers.map((function(t,a){return Object(C.jsx)(I,{errors:i,touched:c,ticketIndex:a+1,readOnly:!r||e.readOnly,passengers:e.passengers,setFieldValue:s,submitForm:n},a+1)}))}),Object(C.jsx)(N.If,{condition:!r,children:Object(C.jsx)(N.Then,{children:Object(C.jsx)(b.a,{item:!0,style:{marginTop:40,marginBottom:20},xs:12,children:Object(C.jsx)(h.a,{className:m.a.continueButton,variant:"contained",disabled:a,onClick:n,children:"\u05d4\u05de\u05e9\u05da \u05dc\u05d4\u05d6\u05e0\u05ea \u05e4\u05e8\u05d8\u05d9 \u05ea\u05e9\u05dc\u05d5\u05dd"})})})})]}),Object(C.jsx)(B.a,{})]})}})};S.defaultProps={passengers:{},onSubmit:function(e){return new Promise((function(e){setTimeout(e,1e3)}))}};var w,M=r.a.memo(S),E=n(28),D=n(1291),R=n(340),V=n(15),z=n(687),q=n(1412),L=n.n(q),U=(n(1413),n(1294)),W=n.n(U);!function(e){e.CreditGuard="creditguard",e.Meshulam="meshulam",e.Paypal="paypal"}(w||(w={}));var H=n(18),Y=n(68),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.Meshulam;switch(e){case w.Meshulam:case w.CreditGuard:return 630}return 630},J=function(e){var t=e.loading,n=e.beginTransaction,r=e.beginTransactionOnRender,c=e.product,i=e.options,s=Object(V.a)(e,["loading","beginTransaction","beginTransactionOnRender","product","options"]),o=!!s.transaction;return Object(a.useEffect)((function(){!0===r&&!0!==o&&n(c,i)}),[r,n,o,c,i]),Object(C.jsx)("div",{className:L.a.TransactionIframe,children:Object(C.jsxs)(N.Switch,{children:[Object(C.jsx)(N.Case,{condition:o&&"SUCCESS"===s.transaction.type,children:function(){return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(v.u,{children:Object(C.jsx)(v.g,{children:Object(C.jsx)("h2",{children:Object(C.jsx)(W.a,{style:{width:150,height:150,marginLeft:"auto",marginRight:"auto",display:"block",color:"#7fff3ebf"}})})})})})}}),Object(C.jsx)(N.Case,{condition:o&&"ERROR"===s.transaction.type,children:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(v.u,{children:Object(C.jsx)(v.g,{children:Object(C.jsx)("h2",{style:{color:"red"},children:"\u05ea\u05e7\u05dc\u05d4"})})}),Object(C.jsx)(v.u,{children:Object(C.jsx)(v.g,{children:Object(C.jsx)("h3",{children:s.transaction.ErrorText})})}),Object(C.jsx)(v.u,{children:Object(C.jsx)(v.g,{children:Object(C.jsx)("div",{className:L.a.code,children:s.transaction.ErrorCode})})}),Object(C.jsx)(v.u,{children:Object(C.jsx)(v.g,{children:Object(C.jsx)(h.a,{className:L.a.continueButton,fullWidth:!0,variant:"contained",onClick:function(){return n(c,i)},children:"\u05e0\u05e1\u05d4 \u05dc\u05d1\u05e6\u05e2 \u05e1\u05dc\u05d9\u05e7\u05d4 \u05e9\u05d5\u05d1"})})})]})}}),Object(C.jsx)(N.Case,{condition:o,children:function(){return Object(C.jsx)(z.a,{url:s.transaction.url,height:"".concat(G(i.transaction_type),"px"),width:"100%",frameBorder:0,loading:"eager"})}}),Object(C.jsx)(N.Case,{condition:!r,children:Object(C.jsxs)("div",{className:L.a.purchaseButtons,children:[t?Object(C.jsx)(H.a,{className:[L.a.continueButton,L.a.creditCard].join(" ")}):Object(C.jsx)(h.a,{className:[L.a.continueButton,L.a.creditCard].join(" "),variant:"contained",onClick:function(){return n(c,Object(d.a)(Object(d.a)({},i),{},{transaction_type:w.Meshulam,bit:!1}))},children:"\u05ea\u05e9\u05dc\u05d5\u05dd \u05d1\u05db\u05e8\u05d8\u05d9\u05e1 \u05d0\u05e9\u05e8\u05d0\u05d9"}),t?Object(C.jsx)(H.a,{className:[L.a.continueButton,L.a.bit].join(" ")}):Object(C.jsxs)(h.a,{className:[L.a.continueButton,L.a.bit].join(" "),variant:"contained",onClick:function(){return n(c,Object(d.a)(Object(d.a)({},i),{},{transaction_type:w.Meshulam,bit:!0}))},children:["\u05ea\u05e9\u05dc\u05d5\u05dd \u05e2\u05dd",Object(C.jsx)(Y.a,{src:"/img/bitNoBackground.png",title:"bit"})]})]})})]})})};J.defaultProps={beginTransactionOnRender:!1};var A=r.a.memo(J),K=n(71),Q=Object(E.c)((function(e,t){return Object(d.a)({transaction:Object(D.a)(t.product)(e),loading:Object(K.f)(e)},t)}),(function(e){return{beginTransaction:function(t,n){return e(Object(R.a)(t,n))}}}))(A),X=n(1415),Z=n.n(X),$=n(58),ee=n(375),te=n(1414),ne=n.n(te),ae=n(600),re=x.e({phone:x.g().min(8,"\u05d9\u05e9 \u05dc\u05d4\u05d6\u05d9\u05df \u05de\u05e1\u05e4\u05e8 \u05e0\u05d9\u05d9\u05d3").max(10,"\u05d9\u05e9 \u05dc\u05d4\u05d6\u05d9\u05df \u05de\u05e1\u05e4\u05e8 \u05e0\u05d9\u05d9\u05d3").required("\u05d9\u05e9 \u05dc\u05d4\u05d6\u05d9\u05df \u05de\u05e1\u05e4\u05e8 \u05e0\u05d9\u05d9\u05d3")}),ce=function(e){return Object(C.jsx)(c.a,{title:"\u05e4\u05e8\u05d8\u05d9 \u05ea\u05e7\u05e9\u05d5\u05e8\u05ea",icon:s.a,toolTip:"\u05e4\u05d9\u05e8\u05d5\u05d8",defaultExpanded:!0,children:Object(C.jsx)(f.Formik,{initialValues:{phone:""},validationSchema:re,onSubmit:function(){var t=Object(l.a)(u.a.mark((function t(n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,a.setSubmitting)(!1),t.next=4,e.updateProfile(n);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),enableReinitialize:!1,children:function(e){var t=e.submitForm,n=e.isSubmitting;e.values,e.submitCount,e.touched,e.errors,e.setFieldValue;return Object(C.jsx)(f.Form,{className:ne.a.PhoneForm,translate:null,children:Object(C.jsxs)(b.a,{container:!0,spacing:2,children:[Object(C.jsxs)(b.a,{item:!0,xs:12,children:["\u05d0\u05e0\u05d0 \u05de\u05dc\u05d0 \u05d0\u05ea \u05d4\u05d8\u05dc\u05e4\u05d5\u05df \u05d4\u05e0\u05d9\u05d9\u05d3 \u05e9\u05dc\u05da",Object(C.jsx)("br",{}),"\u05db\u05d3\u05d9 \u05dc\u05e7\u05d1\u05dc \u05e9\u05d9\u05e0\u05d5\u05d9\u05d9 \u05e1\u05d8\u05d0\u05d8\u05d5\u05e1 \u05dc\u05d4\u05e6\u05d0\u05d4 \u05e9\u05dc\u05da"]}),Object(C.jsx)(b.a,{item:!0,xs:12,className:"",children:Object(C.jsx)(b.a,{item:!0,style:{marginTop:15},xs:12,sm:6,children:Object(C.jsx)(ae.a,{label:"\u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df",name:"phone"})})}),Object(C.jsx)(b.a,{item:!0,style:{marginTop:40,marginBottom:20},xs:12,children:Object(C.jsx)(h.a,{className:ne.a.continueButton,fullWidth:!0,variant:"contained",disabled:n,onClick:t,children:"\u05d4\u05de\u05e9\u05da \u05dc\u05d4\u05d6\u05e0\u05ea \u05e4\u05e8\u05d8\u05d9 \u05e0\u05d5\u05e1\u05e2\u05d9\u05dd"})})]})})}})})};ce.defaultProps={passengers:{},onSubmit:function(e){return new Promise((function(e){setTimeout(e,1e3)}))}};var ie=r.a.memo(ce),se=Object(E.c)((function(e){return{user:Object($.h)(e)}}),(function(e){return{updateProfile:function(t){return e(Object(ee.b)(t))}}}))(ie),oe=function(e){var t=!!(e.user&&"string"===typeof e.user.phone&&e.user.phone.length>=8&&e.user.phone.length<=15),n=T(e.order.options.passengers);return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(N.If,{condition:t,children:[Object(C.jsx)(N.Then,{children:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(c.a,{title:"\u05e4\u05d9\u05e8\u05d5\u05d8 \u05e0\u05d5\u05e1\u05e2\u05d9\u05dd",icon:s.a,toolTip:"\u05e4\u05d9\u05e8\u05d5\u05d8",defaultExpanded:!0,children:Object(C.jsx)(M,{user:e.user,passengers:e.order.options.passengers,onSubmit:function(t){return e.beginOrder(e.product,{passengers:t}),Promise.resolve()}})}),Object(C.jsx)(N.If,{condition:n,children:Object(C.jsx)(N.Then,{children:Object(C.jsx)(c.a,{title:"\u05e4\u05e8\u05d8\u05d9 \u05ea\u05e9\u05dc\u05d5\u05dd",icon:Z.a,toolTip:"\u05e4\u05d9\u05e8\u05d5\u05d8",defaultExpanded:!0,children:Object(C.jsx)(Q,{product:e.product,options:{ticketsAmount:e.order.options.passengers.length,transaction_type:w.Meshulam}})})})})]})}}),Object(C.jsx)(N.Else,{children:Object(C.jsx)(se,{})})]})})};oe.defaultProps={};t.default=r.a.memo(oe)}}]);
//# sourceMappingURL=SecondStage.0e8d708b.chunk.js.map